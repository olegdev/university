define(['threejs', 'underscore', 'figures/tetra', 'konstructor/Model'], function(th, _, Tetra, Model) {

var Figure = function(config) {
	this.config = config;
	this.objects = [];
}
Figure.prototype = new Tetra({});
Figure.prototype.constructor = Figure;

Figure.prototype.data = '{"faces":[{"id":"10","index":1,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"9","x":0,"y":"-290","z":"280"},{"id":"4","x":"-220","y":"-400","z":"270"}],"rotation":{"radius":999.9999999999985,"phi":1.7069310084059899,"theta":-0.17802358372238436}},{"id":"11","index":1,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"9","x":0,"y":"-290","z":"280"},{"id":"2","x":"170","y":"280","z":"290"}],"rotation":{"radius":999.9999999999985,"phi":1.7069310084059899,"theta":-0.17802358372238436}},{"id":"12","index":2,"vertices":[{"id":"9","x":0,"y":"-290","z":"280"},{"id":"2","x":"170","y":"280","z":"290"},{"id":"3","x":"320","y":"-200","z":"190"}],"rotation":{"radius":999.9999999999983,"phi":1.6650431063581257,"theta":0.4921828490434375}},{"id":"13","index":3,"vertices":[{"id":"4","x":"-220","y":"-400","z":"270"},{"id":"9","x":0,"y":"-290","z":"280"},{"id":"8","x":"-290","y":"-280","z":-200}],"rotation":{"radius":999.9999999999965,"phi":3.1415916532123473,"theta":0.7644542123672035}},{"id":"14","index":4,"vertices":[{"id":"8","x":"-290","y":"-280","z":-200},{"id":"9","x":0,"y":"-290","z":"280"},{"id":"7","x":"190","y":"-260","z":-200}],"rotation":{"radius":999.9999999999966,"phi":3.0682878244066485,"theta":1.2042771838793895}},{"id":"15","index":5,"vertices":[{"id":"7","x":"190","y":"-260","z":-200},{"id":"9","x":0,"y":"-290","z":"280"},{"id":"3","x":"320","y":"-200","z":"190"}],"rotation":{"radius":999.9999999999967,"phi":2.377137440616897,"theta":1.1623892818315258}},{"id":"16","index":6,"vertices":[{"id":"5","x":"-150","y":"230","z":"-270"},{"id":"7","x":"190","y":"-260","z":-200},{"id":"8","x":"-290","y":"-280","z":-200}],"rotation":{"radius":999.9999999999957,"phi":1.9896743466741567,"theta":3.0787608005212985}},{"id":"17","index":7,"vertices":[{"id":"5","x":"-150","y":"230","z":"-270"},{"id":"6","x":"220","y":"270","z":"-280"},{"id":"7","x":"190","y":"-260","z":-200}],"rotation":{"radius":999.9999999999964,"phi":1.3613558159561965,"theta":2.722713633114459}},{"id":"18","index":8,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"2","x":"170","y":"280","z":"290"},{"id":"6","x":"220","y":"270","z":"-280"}],"rotation":{"radius":999.9999999999961,"phi":0.1466066565681428,"theta":1.6755160819178627}},{"id":"19","index":9,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"6","x":"220","y":"270","z":"-280"},{"id":"5","x":"-150","y":"230","z":"-270"}],"rotation":{"radius":999.9999999999968,"phi":0.020944951068383916,"theta":2.33525053916155}},{"id":"20","index":10,"vertices":[{"id":"2","x":"170","y":"280","z":"290"},{"id":"7","x":"190","y":"-260","z":-200},{"id":"3","x":"320","y":"-200","z":"190"}],"rotation":{"radius":999.9999999999961,"phi":1.424189669671824,"theta":2.0629791758504323}},{"id":"21","index":11,"vertices":[{"id":"2","x":"170","y":"280","z":"290"},{"id":"6","x":"220","y":"270","z":"-280"},{"id":"7","x":"190","y":"-260","z":-200}],"rotation":{"radius":999.9999999999959,"phi":1.2042781839205379,"theta":1.6231562043478618}},{"id":"22","index":12,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"8","x":"-290","y":"-280","z":-200},{"id":"4","x":"-220","y":"-400","z":"270"}],"rotation":{"radius":999.9999999999941,"phi":1.6650451064470408,"theta":-1.5393804002658644}},{"id":"23","index":13,"vertices":[{"id":"1","x":"-230","y":"280","z":"260"},{"id":"5","x":"-150","y":"230","z":"-270"},{"id":"8","x":"-290","y":"-280","z":-200}],"rotation":{"radius":999.9999999999935,"phi":1.1728622573846388,"theta":-2.22005880854365}}]}';

Figure.prototype.create = function(scene) {
	var model;
	var colors = [];

	this.config.faces.forEach(function(face) {
		colors.push(face.color);
	});

	model = new Model([], colors);

	model.fromJSON(this.data);
	model.render(scene);

	this.faces = model.faces;
}

return Figure;
});